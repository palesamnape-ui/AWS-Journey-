# AWS Challenge Lab: Internet Protocols - Public and Private IP Addresses

<img width="801" height="487" alt="image" src="https://github.com/user-attachments/assets/e4e907bf-0b12-46af-9636-47e5b0ac037d" />


## Hey! Welcome to My AWS Lab Journey ðŸ‘‹

You're looking at the documentation for an AWS Challenge Lab I completed, where I stepped into the role of a Cloud Support Engineer troubleshooting a customer's networking issue. It was a hands-on exercise that pushed me to understand the critical differences between public and private IP addresses and how they affect network connectivity.

## What I Set Out to Do

The challenge was straightforward but required real execution:

1. **Investigate a customer issue** where one EC2 instance could reach the internet and another couldn't, despite identical configurations
2. **Analyze IP addressing** to identify the root cause of the connectivity problem
3. **Test connectivity** using SSH to verify which instances are accessible from the internet
4. **Provide recommendations** on using public vs. private CIDR blocks for VPC design
5. **Document findings** and present a solution to the customer

No shortcuts, no copy-paste solutionsâ€”just me, two EC2 instances with mysterious connectivity issues, and networking fundamentals to apply.

---

## The Customer's Problem

I received a support ticket from Jess, a Cloud Admin at a Fortune 500 company. She had two EC2 instances in the same VPC and subnet with supposedly identical configurations:

- **Instance A:** Cannot reach the internet
- **Instance B:** Can reach the internet perfectly

She also asked whether using a public IP range like 12.0.0.0/16 for a VPC would cause issues.

My job: Figure out what's different and explain why.

---

## How I Tackled It

### Getting Started: Accessing the Environment

First thing I did was fire up the AWS lab environment and navigated to the EC2 console. I had two instances waiting for meâ€”Instance A and Instance Bâ€”both supposedly configured identically. Time to investigate.

**Figure 1: EC2 dashboard showing both instances**
<img width="1341" height="582" alt="instancwA" src="https://github.com/user-attachments/assets/2a9f44d0-914b-4bea-8584-c77b0a379ffc" />


### The Investigation: Comparing Network Configurations

I selected Instance A and examined its Networking tab. I carefully recorded both its public and private IPv4 addresses. Then I did the same for Instance B. 

Here's what I discovered:
- **Instance A:** Had only a **Private IPv4 address** (10.0.x.x range) - No public IP assigned
- **Instance B:** Had both a **Private IPv4 address** (10.0.x.x range) AND a **Public IPv4 address**

Bingo. The root cause was immediately clearâ€”Instance A had no public IP address, which meant it couldn't be accessed from the internet or reach out to the internet directly.

**Figure 2: Instance A networking details showing only private IP**

<img width="1362" height="673" alt="net intsn b2" src="https://github.com/user-attachments/assets/91c776e2-790a-4976-a104-a6df71391173" />


**Figure 3: Instance B networking details showing both public and private IPs**

<img width="1341" height="582" alt="instancwA" src="https://github.com/user-attachments/assets/a1a47c74-2868-4082-9cae-98c9c64461f1" />


### The Test: SSH Connectivity Verification

Now I needed to prove my theory. I downloaded the SSH key pair and attempted to connect to both instances using their public IP addresses.

Here's what my connectivity tests revealed:
- **Instance A:** SSH connection failedâ€”the public IP field was empty, so there was nothing to connect to
- **Instance B:** SSH connection succeeded immediately using its public IP address

The test confirmed the diagnosis. Instance A was unreachable from the internet because it lacked a public IP address. Private IP addresses (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) are non-routable on the public internet by design.

**Figure 4: SSH connection attempt to Instance A (failed)**
<img width="488" height="427" alt="Screenshot 2025-12-15 193845" src="https://github.com/user-attachments/assets/ed03877d-b047-4bf9-871b-b6add1cebc9e" />



**Figure 5: Successful SSH connection to Instance B**

<img width="1363" height="614" alt="lastpicchngedIP net" src="https://github.com/user-attachments/assets/6c51cdb0-bee4-4afb-8cc0-7640094d48c7" />


### The Deep Dive: Understanding the OSI Model Connection

To provide a thorough analysis, I applied the OSI model troubleshooting approachâ€”starting from the bottom layer (Physical) and working up. In AWS terms:

- **Physical Layer:** Region and Availability Zone (âœ“ working)
- **Network Layer:** Route tables, Internet Gateway, Subnets (âœ“ working)
- **Transport Layer:** Security groups, NACLs (âœ“ working)
- **Session Layer:** EC2 instance configuration (âœ— **PROBLEM HERE**)

The issue wasn't with the AWS architectureâ€”it was with the EC2 instance configuration itself. Instance A simply hadn't been assigned a public IP address at launch.

**Figure 6: Architecture diagram showing the connectivity issue**

![Architecture Diagram Screenshot](./images/architecture-diagram.png)
<!-- Upload to: repository_root/images/architecture-diagram.png -->

### Addressing the Second Question: Public CIDR Blocks

Jess also asked about using 12.0.0.0/16 (a public IP range) for her VPC. This is a critical mistake that I needed to address.

**My recommendation:** Never use public IP ranges for private VPCs. Here's why:

- Public IP ranges are owned by organizations and routed on the internet
- Using 12.0.0.0/16 could cause routing conflicts if that range is actually allocated to an ISP or company
- RFC 1918 defines private IP ranges specifically for internal use: 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16
- Using private ranges ensures no conflicts with internet routing

The correct approach is to always use RFC 1918 private IP ranges for VPC CIDR blocks.

---

## My Solution to the Customer

**The Root Cause:**

Instance A cannot reach the internet because it was not assigned a public IP address when launched. Private IP addresses are non-routable on the public internet by designâ€”they're meant for internal communication within the VPC.

**The Fix:**

1. **Immediate solution:** Associate an Elastic IP address with Instance A to give it a persistent public IP
2. **Long-term solution:** Enable "Auto-assign Public IP" in the subnet settings to ensure all future instances in that subnet receive public IPs automatically
3. **Alternative approach:** If internet access is needed but inbound access isn't, place the instance in a private subnet and route traffic through a NAT Gateway

**Regarding Public CIDR Blocks:**

I strongly recommend against using public IP ranges like 12.0.0.0/16 for VPC CIDR blocks. Always use RFC 1918 private ranges (10.0.0.0/8, 172.16.0.0/12, or 192.168.0.0/16) to avoid routing conflicts and follow AWS best practices.

---

## What I Learned

This wasn't just about troubleshooting one instance. The real value was in:

- **IP Addressing Fundamentals** - I deeply understood the difference between public and private IP addresses and their routing implications
- **Systematic Troubleshooting** - I learned to apply the OSI model to cloud architecture for methodical problem diagnosis
- **AWS Networking Concepts** - I gained hands-on experience with how EC2 instances get assigned IP addresses and how that affects connectivity
- **Communication Skills** - I practiced translating technical findings into clear, actionable recommendations for customers

It's one thing to memorize that private IPs aren't internet-routable. It's another to diagnose a real connectivity issue, test your hypothesis, and explain the solution clearly to a customer.

---

## Repository Contents

```
.
â”œâ”€â”€ images/                           # Screenshots documenting the process
â”‚   â”œâ”€â”€ aws-banner.png
â”‚   â”œâ”€â”€ ec2-dashboard.png
â”‚   â”œâ”€â”€ instance-a-network.png
â”‚   â”œâ”€â”€ instance-b-network.png
â”‚   â”œâ”€â”€ ssh-instance-a-fail.png
â”‚   â”œâ”€â”€ ssh-instance-b-success.png
â”‚   â””â”€â”€ architecture-diagram.png
â”œâ”€â”€ troubleshooting-notes.md          # Detailed troubleshooting process
â”œâ”€â”€ customer-response.md              # Final response sent to customer
â””â”€â”€ README.md                         # You're reading it
```

---

## Key Concepts Learned

### Private IP Ranges (RFC 1918)
- **10.0.0.0/8** - 16,777,216 addresses
- **172.16.0.0/12** - 1,048,576 addresses
- **192.168.0.0/16** - 65,536 addresses

### Public vs. Private IP Addresses

| Aspect | Private IP | Public IP |
|--------|-----------|-----------|
| **Routable on Internet** | No | Yes |
| **Unique Globally** | No | Yes |
| **Use Case** | Internal VPC communication | Internet-facing resources |
| **Assignment** | Automatic within VPC | Must be explicitly assigned |
| **Cost** | Free | Elastic IPs cost when not attached |

### Troubleshooting Methodology

When diagnosing AWS networking issues, work methodically through layers:
1. **Physical:** Check region/AZ availability
2. **Network:** Verify route tables, IGW, subnets
3. **Transport:** Review security groups and NACLs
4. **Session:** Examine instance configuration

---

## Want to Try This Yourself?

If you have access to AWS and want to replicate this:

1. Launch two EC2 instances in the same VPC and subnet
2. Assign a public IP to only one instance (disable auto-assign for the other)
3. Try to SSH into both instances using their public IPs
4. Observe which one succeeds and which one fails
5. Investigate the networking configuration differences
6. Fix the issue by assigning an Elastic IP or enabling auto-assign public IP

It's a simple exercise, but it builds critical networking troubleshooting skills.

---

## Tech Stack

- **Cloud Platform:** AWS (VPC, EC2, Internet Gateway)
- **Networking:** IPv4 addressing, public/private IP concepts, RFC 1918
- **Tools:** SSH, PuTTY (Windows), Terminal (Mac/Linux)
- **Troubleshooting:** OSI model application to cloud architecture

---

## The Customer Response

**From:** Cloud Support Engineer  
**To:** Jess, Cloud Admin  
**Subject:** RE: Instance A Internet Connectivity Issue

Hi Jess,

I've investigated your networking issue and identified the root cause.

**Problem:** Instance A was not assigned a public IP address when launched, while Instance B was. Private IP addresses are non-routable on the public internet, which is why Instance A cannot reach external resources.

**Solution:** Assign an Elastic IP to Instance A, or enable "Auto-assign Public IP" in your subnet settings for future instances.

**Regarding your VPC question:** I strongly recommend using RFC 1918 private ranges (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) instead of public ranges like 12.0.0.0/16 to avoid routing conflicts.

Let me know if you need help implementing the fix!

Best regards,  
Cloud Support Engineer

---

*Completed as part of AWS Training & Certification Challenge Lab*

![Footer](./images/footer.png)
<!-- Upload to: repository_root/images/footer.png -->
